{% extends 'base.html' %}


{% block content %}

<section class="section-conten padding-y bg">

{% include 'includes/alerts.html' %}
<div class="container">
	<div class="row">
	{% include 'includes/dashboard_sidebar.html' %}
	<main class="col-md-9">
		<article class="card">
		<header class="card-header">
			<strong class="d-inline-block mr-3">Your order history</strong>

		</header>
		<div class="card-body">
			<div class="row">
			<div class="col-md-12">
				<div class="table-responsive">
					<table class="table table-hover">
					  <thead class="thead-light">
					    <tr>
					      <th scope="col">Order #</th>
					      <th scope="col">Transaction ID</th>
					      <th scope="col">Billing Name</th>
					      <th scope="col">Payment Method</th>
					      <th scope="col">Status</th>
					      <th scope="col">Total</th>
							<th scope="col">Date</th>
					    </tr>
					  </thead>
					  <tbody>
						{% for order in orders %}
					    <tr>
					      <th scope="row">
					      	<a href="{% url 'order_detail' order.order_number %}" class="text-primary">
					      		<i class="fa fa-file-text-o"></i> {{order.order_number}}
					      	</a>
					      </th>
					      <td>
					      	<small class="text-muted">{{order.payment.payment_id|truncatechars:20}}</small>
					      </td>
					      <td>{{order.full_name}}</td>
					      <td>
					      	{% if order.payment.payment_method == 'DIRECT' %}
					      		<span class="badge badge-primary">
					      			<i class="fa fa-money"></i> Direct
					      		</span>
					      	{% elif order.payment.payment_method == 'CRYPTO' %}
					      		<span class="badge badge-success">
					      			<i class="fa fa-bitcoin"></i> Crypto
					      		</span>
					      	{% else %}
					      		<span class="badge badge-secondary">
					      			<i class="fa fa-credit-card"></i> {{order.payment.get_payment_method_display}}
					      		</span>
					      	{% endif %}
					      </td>
					      <td>
					      	{% if order.status == 'Completed' %}
					      		<span class="badge badge-success">{{order.status}}</span>
					      	{% elif order.status == 'New' %}
					      		<span class="badge badge-info">{{order.status}}</span>
					      	{% elif order.status == 'Accepted' %}
					      		<span class="badge badge-primary">{{order.status}}</span>
					      	{% elif order.status == 'Cancelled' %}
					      		<span class="badge badge-danger">{{order.status}}</span>
					      	{% else %}
					      		<span class="badge badge-secondary">{{order.status}}</span>
					      	{% endif %}
					      </td>
					      <td><strong>${{order.order_total}}</strong></td>
							<td><small>{{order.created_at|date:"M d, Y"}}</small></td>
					    </tr>
						{% empty %}
						<tr>
							<td colspan="7" class="text-center">
								<p class="text-muted">No orders yet. <a href="{% url 'store' %}">Start shopping</a></p>
							</td>
						</tr>
						{% endfor %}

					  </tbody>
					</table>
				</div>
			</div>

			</div> <!-- row.// -->
		</div> <!-- card-body .// -->

		</article> <!-- order-group.// -->
	</main>
</div> <!-- row.// -->
</div>


</section>

{% endblock %}
